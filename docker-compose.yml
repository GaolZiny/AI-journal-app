version: '3.8'

services:
  journal-entry-app:
    image: ghcr.io/YOUR_GITHUB_USERNAME/journal-entry-app:latest  # 替换为你的 GitHub 用户名
    container_name: journal-entry-app
    restart: unless-stopped
    ports:
      - "3000:80"  # 映射到主机的 3000 端口，可根据需要修改
    environment:
      - TZ=Asia/Tokyo
      # Firebase 配置 - 在部署时填入实际值
      - VITE_FIREBASE_API_KEY=your_firebase_api_key
      - VITE_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
      - VITE_FIREBASE_PROJECT_ID=your_project_id
      - VITE_FIREBASE_STORAGE_BUCKET=your_project.firebasestorage.app
      - VITE_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
      - VITE_FIREBASE_APP_ID=your_app_id
      # n8n Webhook 地址
      - VITE_N8N_BASE_URL=http://your-n8n-server:5678
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost/health"]
      interval: 30s
      timeout: 3s
      retries: 3
      start_period: 10s

# 如果使用外部网络（如 Traefik、Nginx Proxy Manager 等反向代理）
# networks:
#   default:
#     external:
#       name: your_proxy_network
